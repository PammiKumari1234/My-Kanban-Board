"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[539],{8539:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});var s=t(5155),r=t(2115);let l=e=>{let{isOpen:a,onClose:t,onSubmit:l}=e,[n,o]=(0,r.useState)(""),[i,d]=(0,r.useState)(""),[c,g]=(0,r.useState)("backlog"),[x,p]=(0,r.useState)(""),[u,m]=(0,r.useState)("low");(0,r.useEffect)(()=>{a||(o(""),d(""),g("backlog"),p(""),m("low"))},[a]);let h=async e=>{e.preventDefault(),await l({title:n,description:i,PStatus:c,assignee:x,priority:u}),t()};return a?(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-20 z-50",children:(0,s.jsxs)("form",{onSubmit:h,className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md space-y-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-700",style:{margin:"10px"},children:"Create a New Task"}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",style:{margin:"10px"},children:[(0,s.jsx)("label",{className:"font-medium text-gray-600",children:"Title"}),(0,s.jsx)("input",{className:"w-full border px-3 py-2 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Task Title",value:n,onChange:e=>o(e.target.value),required:!0})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",style:{margin:"10px"},children:[(0,s.jsx)("label",{className:"font-medium text-gray-600",children:"Description"}),(0,s.jsx)("textarea",{className:"w-full border px-3 py-2 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Task Description",value:i,onChange:e=>d(e.target.value)})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",style:{margin:"10px"},children:[(0,s.jsx)("label",{className:"font-medium text-gray-600",children:"Status"}),(0,s.jsxs)("select",{className:"w-full border px-3 py-2 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",value:c,onChange:e=>g(e.target.value),children:[(0,s.jsx)("option",{value:"backlog",children:"Backlog"}),(0,s.jsx)("option",{value:"inProgress",children:"In Progress"}),(0,s.jsx)("option",{value:"review",children:"Review"}),(0,s.jsx)("option",{value:"done",children:"Done"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",style:{margin:"10px"},children:[(0,s.jsx)("label",{className:"font-medium text-gray-600",children:"Assignee"}),(0,s.jsx)("input",{className:"w-full border px-3 py-2 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Assignee Name",value:x,onChange:e=>p(e.target.value)})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",style:{margin:"10px"},children:[(0,s.jsx)("label",{className:"font-medium text-gray-600",children:"Priority"}),(0,s.jsxs)("select",{className:"w-full border px-3 py-2 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",value:u,onChange:e=>m(e.target.value),children:[(0,s.jsx)("option",{value:"low",children:"Low"}),(0,s.jsx)("option",{value:"medium",children:"Medium"}),(0,s.jsx)("option",{value:"high",children:"High"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",style:{margin:"10px"},children:[(0,s.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 rounded-md text-gray-600 border border-gray-300 hover:bg-gray-100 transition-colors",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"bg-orange-500 text-white px-4 py-2 rounded-md hover:bg-orange-600 transition-colors",children:"Save Task"})]})]})}):null};var n=t(5294);function o(){let[e,a]=(0,r.useState)([]),[t,o]=(0,r.useState)(!1),[i,d]=(0,r.useState)(!0),[c,g]=(0,r.useState)(null);async function x(){d(!0),g(null);try{let e=await fetch("/api/tasks");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.json();a(t)}catch(e){console.error("Failed to fetch tasks:",e),g("Failed to load tasks. Please try again.")}finally{d(!1)}}(0,r.useEffect)(()=>{x()},[]);let p=async e=>{try{let t=await fetch("/api/tasks/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let s=await t.json();a(e=>[...e,s]),o(!1)}catch(e){console.error("Failed to add task:",e),g("Failed to add task. Please try again.")}},u=async e=>{if(window.confirm("Are you sure you want to delete this task?"))try{let t=await fetch("/api/tasks/".concat(e),{method:"DELETE"});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));a(a=>a.filter(a=>a.id!==e))}catch(e){console.error("Failed to delete task:",e),g("Failed to delete task. Please try again.")}},m=async t=>{let{destination:s,source:r,draggableId:l}=t;if(!s||s.droppableId===r.droppableId&&s.index===r.index)return;let n=e.find(e=>e.id.toString()===l);if(!n)return;let o=s.droppableId;a(e.map(e=>e.id.toString()===l?{...e,PStatus:o}:e));try{let t=await fetch("/api/tasks/".concat(n.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({PStatus:o})});if(!t.ok)throw a(e),Error("HTTP error! status: ".concat(t.status))}catch(t){console.error("Failed to update task status:",t),g("Failed to update task status. Please try again."),a(e)}};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",style:{padding:"15px"},children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6",style:{padding:"15px 0"},children:[(0,s.jsx)("h2",{className:"font-bold text-3xl text-gray-800 mb-4 sm:mb-0",children:"Welcome!"}),(0,s.jsx)("button",{className:"px-6 py-3 bg-orange-500 text-white rounded-lg shadow-md hover:bg-orange-600 transition-all duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-opacity-50",onClick:()=>o(!0),style:{padding:"5px"},children:"Create Task +"})]}),c&&(0,s.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:[(0,s.jsx)("strong",{className:"font-bold",children:"Error!"}),(0,s.jsxs)("span",{className:"block sm:inline",children:[" ",c]})]}),i?(0,s.jsx)("div",{className:"text-center py-10 text-gray-600 text-lg",children:"Loading tasks..."}):(0,s.jsx)(n.JY,{onDragEnd:m,children:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",style:{padding:"5px"},children:["backlog","inProgress","review","done"].map(a=>(0,s.jsx)(n.gL,{droppableId:a,children:(t,r)=>(0,s.jsxs)("div",{ref:t.innerRef,...t.droppableProps,className:"bg-gray-50 rounded-lg p-4 space-y-4 shadow-sm kanban-column ".concat(r.isDraggingOver?"bg-blue-100":""),children:[(0,s.jsx)("h3",{className:"bg-gray-200 text-gray-700 font-semibold text-lg capitalize py-2 px-3 rounded-md",style:{padding:"5px 14px"},children:"inProgress"===a?"In Progress":a}),(0,s.jsxs)("div",{className:"space-y-3",style:{padding:"5px"},children:[e.filter(e=>e.PStatus===a).map((e,a)=>(0,s.jsx)(n.sx,{draggableId:e.id.toString(),index:a,children:(a,t)=>(0,s.jsxs)("div",{ref:a.innerRef,...a.draggableProps,...a.dragHandleProps,className:"bg-white rounded-lg p-4 shadow-md flex flex-col gap-2 border border-gray-200 hover:shadow-lg transition-shadow duration-200 ".concat(t.isDragging?"ring-2 ring-blue-500":""),children:[(0,s.jsx)("span",{style:{padding:"5px 14px"},className:"font-bold text-gray-900 text-lg",children:e.title}),(0,s.jsx)("span",{style:{padding:"5px 14px"},className:"text-gray-600 text-sm",children:e.description}),(0,s.jsxs)("span",{style:{padding:"5px 14px"},className:"text-gray-500 text-sm flex items-center gap-1",children:[(0,s.jsx)("svg",{xmlns:"[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),e.assignee]}),(0,s.jsx)("span",{style:{padding:"5px 14px"},className:"font-semibold text-sm px-2 py-1 rounded-full inline-block ".concat("high"===e.priority?"bg-red-100 text-red-700":"medium"===e.priority?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"),children:e.priority}),(0,s.jsx)("button",{onClick:()=>u(e.id),style:{padding:"5px",margin:"10px"},className:"mt-2 self-end px-3 py-1 bg-red-500 text-white text-xs rounded-md hover:bg-red-600 transition-colors",children:"Delete"})]})},e.id.toString())),t.placeholder,0===e.filter(e=>e.PStatus===a).length&&(0,s.jsx)("div",{className:"text-gray-400 text-center py-4 text-sm",children:"No tasks in this column."})]})]})},a))})}),(0,s.jsx)(l,{isOpen:t,onClose:()=>o(!1),onSubmit:p})]})})}}}]);